# =============================================================================
# GEMINI VIDEO - MASTER DEPLOYMENT CONFIGURATION
# =============================================================================
# SECURITY WARNING: Never commit actual credentials to version control
# Copy this file and fill in your actual values
#
# This template contains ALL environment variables for:
# - Gateway API, Drive Intel, Video Agent, ML Service, Meta Publisher, Titan-Core
# - Frontend (React/Vite), Database (PostgreSQL), Cache (Redis)
# - Cloud deployment (GCP Cloud Run, Docker Compose)
# =============================================================================

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
# Environment: development, staging, production
NODE_ENV=production
VITE_ENV=production

# Deployment target: cloud-run, docker-compose
DEPLOYMENT_TARGET=cloud-run

# =============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# =============================================================================
# PostgreSQL Connection
POSTGRES_USER=geminivideo
POSTGRES_PASSWORD=YOUR_SECURE_PASSWORD_HERE_MIN_32_CHARS
POSTGRES_DB=geminivideo
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Full database connection URL
# Local: postgresql://user:password@localhost:5432/database
# Supabase: postgresql://postgres:password@db.your-project.supabase.co:5432/postgres
# Cloud SQL: postgresql://user:password@/database?host=/cloudsql/project:region:instance
DATABASE_URL=postgresql://geminivideo:YOUR_SECURE_PASSWORD_HERE@localhost:5432/geminivideo

# PostgreSQL Production Optimizations
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=256MB

# =============================================================================
# SUPABASE (Alternative to self-hosted PostgreSQL)
# =============================================================================
# Get these from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...your-anon-key
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...your-service-key

# =============================================================================
# REDIS CONFIGURATION (REQUIRED)
# =============================================================================
# Local Redis
REDIS_URL=redis://localhost:6379

# Upstash Redis (Recommended for serverless)
# Get these from: https://console.upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# Redis with authentication
# REDIS_URL=redis://:password@localhost:6379
# REDIS_URL=rediss://default:password@redis.example.com:6379

# Redis Cluster (optional)
# REDIS_CLUSTER_NODES=redis1:6379,redis2:6379,redis3:6379
REDIS_ENABLED=true

# =============================================================================
# AI MODEL API KEYS (REQUIRED)
# =============================================================================
# Google Gemini API
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL_ID=gemini-2.0-flash-thinking-exp-1219

# OpenAI API (Optional but recommended)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here

# Anthropic Claude API (Optional but recommended)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# =============================================================================
# GOOGLE CLOUD PLATFORM (REQUIRED for Cloud Run deployment)
# =============================================================================
# GCP Project Configuration
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1
CLOUD_RUN_REGION=us-central1

# Google Cloud Storage
# Create bucket: gsutil mb gs://your-bucket-name
GCS_BUCKET_NAME=your-gcs-bucket-name
GCS_PROJECT_ID=your-gcp-project-id

# Service Account
# Create: gcloud iam service-accounts create geminivideo-sa
CLOUD_RUN_SERVICE_ACCOUNT=geminivideo-sa@your-project-id.iam.gserviceaccount.com

# Path to service account JSON (for local development)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
GCP_SERVICE_ACCOUNT_JSON=/path/to/service-account.json

# Container Registry
REGISTRY_URL=us-central1-docker.pkg.dev/your-project-id/geminivideo
IMAGE_TAG=latest

# =============================================================================
# META/FACEBOOK ADS CONFIGURATION (REQUIRED for publishing)
# =============================================================================
# Meta Marketing API
# Get from: https://developers.facebook.com/apps/
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret
META_CLIENT_TOKEN=your-meta-client-token

# Meta Access Token (User or System)
# Generate: https://developers.facebook.com/tools/explorer/
META_ACCESS_TOKEN=your-long-lived-meta-access-token

# Meta Ad Account and Page
META_AD_ACCOUNT_ID=act_1234567890
META_PAGE_ID=your-meta-page-id

# =============================================================================
# FIREBASE CONFIGURATION (REQUIRED for Frontend Authentication)
# =============================================================================
# Get from: https://console.firebase.google.com/project/_/settings/general
VITE_FIREBASE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.firebasestorage.app
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789012
VITE_FIREBASE_APP_ID=1:123456789012:web:abcdef123456
VITE_FIREBASE_MEASUREMENT_ID=G-XXXXXXXXXX

# Firebase Admin SDK (Optional, for server-side)
FIREBASE_API_KEY=your-firebase-admin-key
FIREBASE_PROJECT_ID=your-project-id

# =============================================================================
# SERVICE URLS - EXTERNAL (Set after deployment)
# =============================================================================
# These are the public URLs exposed to clients/frontend
# Format: https://service-name-xxxxx-region.a.run.app

# Main Gateway API
VITE_GATEWAY_URL=https://gateway-api-xxxxx.a.run.app
GATEWAY_URL=https://gateway-api-xxxxx.a.run.app

# Individual services (if exposed publicly)
VITE_DRIVE_INTEL_URL=https://drive-intel-xxxxx.a.run.app
VITE_VIDEO_AGENT_URL=https://video-agent-xxxxx.a.run.app

# =============================================================================
# SERVICE URLS - INTERNAL (Docker Compose / Cloud Run Private)
# =============================================================================
# These are used for service-to-service communication
# Docker Compose: Use service names
# Cloud Run: Use full URLs or private DNS

# For Docker Compose deployment
GATEWAY_API_URL=http://gateway-api:8080
DRIVE_INTEL_URL=http://drive-intel:8081
VIDEO_AGENT_URL=http://video-agent:8082
ML_SERVICE_URL=http://ml-service:8003
META_PUBLISHER_URL=http://meta-publisher:8083
TITAN_CORE_URL=http://titan-core:8084

# For Cloud Run (update after deployment)
# GATEWAY_API_URL=https://gateway-api-xxxxx-uc.a.run.app
# DRIVE_INTEL_URL=https://drive-intel-xxxxx-uc.a.run.app
# VIDEO_AGENT_URL=https://video-agent-xxxxx-uc.a.run.app
# ML_SERVICE_URL=https://ml-service-xxxxx-uc.a.run.app
# META_PUBLISHER_URL=https://meta-publisher-xxxxx-uc.a.run.app
# TITAN_CORE_URL=https://titan-core-xxxxx-uc.a.run.app

# =============================================================================
# SECURITY CONFIGURATION (REQUIRED for Production)
# =============================================================================
# JWT Secret for API Authentication
# Generate: openssl rand -base64 64
JWT_SECRET=your-very-long-random-secret-key-at-least-64-characters-recommended

# CORS Allowed Origins (comma-separated, no spaces)
CORS_ORIGINS=https://your-frontend-domain.com,https://www.your-domain.com

# For development
# CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8000

# =============================================================================
# APPLICATION PORTS (Optional overrides)
# =============================================================================
PORT=8080
GATEWAY_PORT=8080
DRIVE_INTEL_PORT=8081
VIDEO_AGENT_PORT=8082
ML_SERVICE_PORT=8003
META_PUBLISHER_PORT=8083
TITAN_CORE_PORT=8084

# Frontend dev server
VITE_PORT=5173

# API Configuration (Titan-Core)
API_HOST=0.0.0.0
API_PORT=8000

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Local storage paths
TEMP_STORAGE_PATH=/tmp/geminivideo
OUTPUT_STORAGE_PATH=/app/data/outputs
CONFIG_PATH=/app/shared/config

# Titan-Core specific
OUTPUT_DIR=/tmp/titan-core/outputs
CACHE_DIR=/tmp/titan-core/cache

# =============================================================================
# VIDEO PROCESSING CONFIGURATION
# =============================================================================
# Maximum video file size in MB
MAX_VIDEO_SIZE_MB=500

# Video quality: low, medium, high, ultra
VIDEO_QUALITY=high

# FFmpeg encoding threads
FFMPEG_THREADS=4

# =============================================================================
# ML MODEL CONFIGURATION
# =============================================================================
# Minimum samples required before updating weights
MIN_SAMPLES_FOR_UPDATE=50

# Learning rate for weight updates
LEARNING_RATE=0.01

# Maximum weight change per update
MAX_WEIGHT_DELTA=0.1

# =============================================================================
# TITAN-CORE CONFIGURATION
# =============================================================================
# Processing limits
MAX_CONCURRENT_RENDERS=5
DEFAULT_NUM_VARIATIONS=10
APPROVAL_THRESHOLD=85.0

# =============================================================================
# A/B TESTING AND THOMPSON SAMPLING
# =============================================================================
# Enable Thompson Sampling for variant selection
ENABLE_THOMPSON_SAMPLING=true

# Minimum conversions before declaring winner
MIN_CONVERSIONS_FOR_WINNER=30

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_ANALYTICS=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_MCP_INTEGRATION=false
VITE_ENABLE_ANALYTICS=true
VITE_ENABLE_PERFORMANCE=true

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
# Drive Intel worker settings
DRIVE_INTEL_MAX_WORKERS=4
DRIVE_INTEL_BATCH_SIZE=10
DRIVE_WORKER_CONCURRENCY=4
DRIVE_WORKER_REPLICAS=2

# Video Agent worker settings
VIDEO_WORKER_CONCURRENCY=2
VIDEO_WORKER_REPLICAS=2

# =============================================================================
# CLOUD RUN DEPLOYMENT SETTINGS
# =============================================================================
CLOUD_RUN_MIN_INSTANCES=1
CLOUD_RUN_MAX_INSTANCES=10
CLOUD_RUN_TIMEOUT=600
CLOUD_RUN_CONCURRENCY=80
CLOUD_RUN_CPU=2
CLOUD_RUN_MEMORY=2Gi

# =============================================================================
# LOGGING AND DEBUGGING
# =============================================================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Debug mode (should be false in production)
DEBUG=false

# Knowledge base hot reload interval (seconds)
KNOWLEDGE_RELOAD_INTERVAL=300

# =============================================================================
# RATE LIMITING (Optional)
# =============================================================================
# API rate limits (requests per minute)
RATE_LIMIT_RPM=100
RATE_LIMIT_WINDOW_MS=60000

# =============================================================================
# MONITORING AND ALERTING (Optional)
# =============================================================================
# Sentry DSN for error tracking
# Get from: https://sentry.io/
# SENTRY_DSN=https://xxx@sentry.io/xxx

# New Relic (Optional)
# NEW_RELIC_LICENSE_KEY=your-license-key

# DataDog (Optional)
# DATADOG_API_KEY=your-api-key

# =============================================================================
# META PIXEL (Optional - Frontend Analytics)
# =============================================================================
# Get from: https://business.facebook.com/events_manager
VITE_META_PIXEL_ID=your-pixel-id-here

# =============================================================================
# BACKUP AND DISASTER RECOVERY (Optional)
# =============================================================================
# Database backup bucket
BACKUP_BUCKET=gs://your-backup-bucket
BACKUP_RETENTION_DAYS=30

# =============================================================================
# SSL/TLS CONFIGURATION (Optional - for custom domains)
# =============================================================================
# Let's Encrypt email for automatic SSL
LETSENCRYPT_EMAIL=admin@your-domain.com

# SSL certificate paths (for Docker deployment)
# SSL_CERT_PATH=/etc/ssl/certs/your-cert.pem
# SSL_KEY_PATH=/etc/ssl/private/your-key.pem

# =============================================================================
# EMAIL CONFIGURATION (Optional - for notifications)
# =============================================================================
# SMTP settings
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@your-domain.com

# =============================================================================
# SLACK INTEGRATION (Optional - for alerts)
# =============================================================================
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx/yyy/zzz

# =============================================================================
# VERCEL DEPLOYMENT (Optional - Frontend)
# =============================================================================
# VERCEL_TOKEN=your-vercel-token
# VERCEL_ORG_ID=your-org-id
# VERCEL_PROJECT_ID=your-project-id

# =============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
#
# [✓] All passwords are strong and unique (minimum 32 characters)
# [✓] JWT_SECRET is randomly generated (use: openssl rand -base64 64)
# [✓] All AI API keys are valid and have sufficient quotas
# [✓] Database connection string is correct and accessible
# [✓] Redis/Upstash is configured and accessible
# [✓] GCP project is created with billing enabled
# [✓] GCS bucket is created with proper permissions
# [✓] Service account has required IAM roles:
#     - Cloud Run Admin
#     - Service Account User
#     - Storage Admin
#     - Artifact Registry Writer
# [✓] Meta app is in live mode with required permissions
# [✓] Firebase project is created and configured
# [✓] CORS_ORIGINS includes only your actual domains
# [✓] SSL/TLS certificates are configured (Cloud Run handles this automatically)
# [✓] Database backups are enabled
# [✓] Monitoring and alerting are set up
# [✓] Log retention policies are configured
# [✓] Resource limits are appropriate for your workload
# [✓] Security scanning is enabled
# [✓] Secrets are stored securely (use Secret Manager in production)
# [✓] All services can communicate (test with scripts/test-connections.sh)
# [✓] Health checks are passing
# [✓] Load testing has been performed
# [✓] Disaster recovery plan is documented
#
# =============================================================================
# GETTING STARTED
# =============================================================================
# 1. Copy this file: cp .env.deployment .env.production
# 2. Fill in all REQUIRED values (marked with YOUR_* or your-*)
# 3. Run setup script: bash scripts/setup-env.sh
# 4. Test connections: bash scripts/test-connections.sh
# 5. Deploy: bash scripts/deploy-production.sh
#
# For detailed setup instructions, see: docs/DEPLOYMENT.md
# =============================================================================
